{
  "name": "Multi-Stack Development Environment",
  "build": {
    "dockerfile": "Dockerfile",
    "args": {
      "VARIANT": "${localEnv:DEVCONTAINER_VARIANT:nextjs-shadcn}",
    },
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "bradlc.vscode-tailwindcss",
        "golang.go",
        "ms-python.python",
        "ms-python.vscode-pylance",
      ],
      "settings": {
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "[python]": {
          "editor.defaultFormatter": "ms-python.python",
        },
        "[go]": {
          "editor.defaultFormatter": "golang.go",
        },
      },
    },
  },
  "features": {
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": true,
      "installOhMyZsh": true,
      "upgradePackages": true,
    },
    "ghcr.io/devcontainers/features/git:1": {
      "version": "latest",
    },
  },
  "forwardPorts": [3000, 8080, 5000, 8000],
  "portsAttributes": {
    "3000": {
      "label": "Next.js App",
      "onAutoForward": "notify",
    },
    "8080": {
      "label": "Go Server",
      "onAutoForward": "notify",
    },
    "5000": {
      "label": "Python App",
      "onAutoForward": "notify",
    },
    "8000": {
      "label": "Laravel App",
      "onAutoForward": "notify",
    },
  },
  "postCreateCommand": "bash .devcontainer/setup-${localEnv:DEVCONTAINER_VARIANT:nextjs-shadcn}.sh",
  "remoteUser": "vscode",
  "updateContentCommand": "echo 'Container updated'",
  "variants": {
    "nextjs-shadcn": {
      "name": "Next.js + shadcn/ui + Tailwind CSS",
      "build": {
        "dockerfile": "Dockerfile",
        "args": {
          "VARIANT": "nextjs-shadcn",
          "NODE_VERSION": "20",
        },
      },
      "customizations": {
        "vscode": {
          "extensions": [
            "dbaeumer.vscode-eslint",
            "esbenp.prettier-vscode",
            "bradlc.vscode-tailwindcss",
            "oven.bun-vscode",
          ],
        },
      },
      "forwardPorts": [3000],
      "postCreateCommand": "bash .devcontainer/setup-nextjs-shadcn.sh",
    },
    "go": {
      "name": "Go Development Environment",
      "build": {
        "dockerfile": "Dockerfile",
        "args": {
          "VARIANT": "go",
          "GO_VERSION": "1.21",
        },
      },
      "customizations": {
        "vscode": {
          "extensions": ["golang.go"],
        },
      },
      "forwardPorts": [8080],
      "postCreateCommand": "bash .devcontainer/setup-go.sh",
    },
    "python": {
      "name": "Python Development Environment",
      "build": {
        "dockerfile": "Dockerfile",
        "args": {
          "VARIANT": "python",
          "PYTHON_VERSION": "3.11",
        },
      },
      "customizations": {
        "vscode": {
          "extensions": [
            "ms-python.python",
            "ms-python.vscode-pylance",
            "ms-python.black-formatter",
          ],
        },
      },
      "forwardPorts": [5000],
      "postCreateCommand": "bash .devcontainer/setup-python.sh",
    },
    "laravel": {
      "name": "Laravel Development Environment",
      "build": {
        "dockerfile": "Dockerfile",
        "args": {
          "VARIANT": "laravel",
          "PHP_VERSION": "8.2",
        },
      },
      "customizations": {
        "vscode": {
          "extensions": [
            "bmewburn.vscode-intelephense-client",
            "amirrizal.laravel-extra-intellisense",
            "onecentlin.laravel-blade",
            "mikestead.dotenv",
          ],
        },
      },
      "forwardPorts": [8000],
      "postCreateCommand": "bash .devcontainer/setup-laravel.sh",
    },
  },
}
